<html>
    <head>
        <title>Call, Apply y Bind</title>
    </head>
    <body>
        <a href="/ejercicios/">Go back</a>
        <p><em>Abre la consola</em></p>

        <ul>
            <li><button class="call-to-action">Aprender</button></li>
            <li><button class="call-to-action">Aprender más</button></li>
            <li><button class="call-to-action">Nunca parar de aprender!</button></li>
        </ul>
        
        <script>
            // Establecer `this` usando `call`
            function saludar() {
                console.log(`Hola, soy ${this.name} ${this.apellido}`);
            }

            const tonga = {
                name: 'Gastón',
                apellido: 'García Álvarez'
            }

            saludar.call(tonga);

            // Establecer `this` usando `call` y pasar argumentos a la función
            function caminar(metros, direccion) {
                console.log(`${this.name} caminó ${metros} metros hacia el ${direccion}`)
            }

            caminar.call(tonga, 400, 'norte');

            // Establecer `this` usando `apply` y pasar argumentos a la función
            caminar.apply(tonga, [800, 'sur']);

            // Establecer `this` en una nueva función usando `bind`
            const bubu = {
                name: 'Mauro',
                apellido: 'Ledo'
            }

            const bubuSaluda = saludar.bind(bubu);
            bubuSaluda();

            // Setear el contexto de la funcion
            const bubuCamina = caminar.bind(bubu);
            // Pasar argumentos al llamar la funcion
            bubuCamina(400, 'este');

            // Setear el contexto y pasar argumentos
            // const bubuCamina = caminar.bind(bubu, 400, 'este');
            // bubuCamina();

            // Setear el contexto y pasar argumentos parciales
            // const bubuCamina = caminar.bind(bubu, 400);
            // bubuCamina('este');

            // Cuando es útil usar uno de estos métodos
            const buttons = document.getElementsByClassName("call-to-action");
            // buttons.forEach(button => {
            //     button.onclick = () => alert("Nunca pares de aprender!");
            // });

            // NodeList
            Array.prototype.forEach.call(buttons, button => {
                button.onclick = () => alert("Nunca pares de aprender!");
            });
        </script>
    </body>
</html>